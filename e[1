[33mcommit 8486c7ef01afc2c7a8797ecca03e6e76164c666b[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m, [m[1;31morigin/HEAD[m[33m)[m
Author: lukas <61695507+SheepSupreme@users.noreply.github.com>
Date:   Thu Jan 25 21:49:45 2024 +0100

    bro mein kopf tut weh

[1mdiff --git a/sketch_jan10a/AKS/src/display.cpp b/sketch_jan10a/AKS/src/display.cpp[m
[1mindex 9423439..648c95c 100644[m
[1m--- a/sketch_jan10a/AKS/src/display.cpp[m
[1m+++ b/sketch_jan10a/AKS/src/display.cpp[m
[36m@@ -1,43 +1,42 @@[m
 [m
 #include "display.h"[m
 [m
[31m-display::display() : display(128, 64, &Wire, -1) {[m
[32m+[m[32mdisplay::display() : OLED(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET) {[m
 [m
 }[m
 [m
 void display::begin()[m
 {[m
[31m-  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);[m
[31m-  display.display();[m
[31m-  delay(2000);[m
[31m-  display.clearDisplay();[m
[32m+[m[32m  OLED.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS);[m
[32m+[m[32m  OLED.display();[m
[32m+[m[32m  OLED.clearDisplay();[m
 }[m
 [m
 [m
 void display::update_display(String input, uint8_t x, uint8_t y, uint8_t size)[m
 {[m
[31m-  display.clearDisplay();[m
[31m-  display.setCursor(x,y);[m
[31m-  display.setFont();[m
[31m-  display.setTextSize(size);[m
[31m-  display.setTextColor(SSD1306_WHITE);[m
[31m-  display.print(input);[m
[31m-  display.display();[m
[32m+[m[32m  OLED.clearDisplay();[m
[32m+[m[32m  OLED.setCursor(x,y);[m
[32m+[m[32m  OLED.setFont();[m
[32m+[m[32m  OLED.setTextSize(size);[m
[32m+[m[32m  OLED.setTextColor(SSD1306_WHITE);[m
[32m+[m[32m  OLED.print(input);[m
[32m+[m[32m  OLED.display();[m
 }[m
 [m
 void display::status_errorRange()[m
 {[m
[31m-  display.update_display("move not\n possible",15 ,10, 2);[m
[32m+[m[32m  update_display("move not\n possible",15 ,10, 2);[m
   delay(2000);[m
[31m-  display.update_display("range\n violation",35 ,10, 2);[m
[32m+[m[32m  update_display("range\n violation",35 ,10, 2);[m
 }[m
 [m
 void display::status_position(int position)[m
 {[m
[31m-  [m
[32m+[m[32m  update_display(String(position),40 ,25, 2);[m
 }[m
 [m
 void display::status_calibration()[m
 {[m
[31m-[m
[32m+[m[32m    update_display("Aligning",20 ,10, 2);[m
 }[m
[1mdiff --git a/sketch_jan10a/AKS/src/display.h b/sketch_jan10a/AKS/src/display.h[m
[1mindex 873109c..69bc9a5 100644[m
[1m--- a/sketch_jan10a/AKS/src/display.h[m
[1m+++ b/sketch_jan10a/AKS/src/display.h[m
[36m@@ -6,7 +6,7 @@[m
 #include <Wire.h>[m
 #include <SPI.h>[m
 #include <Fonts/Picopixel.h>[m
[31m-#include <string>[m
[32m+[m[32m#include <string.h>[m
 [m
 #define SCREEN_WIDTH 128[m
 #define SCREEN_HEIGHT 64[m
[36m@@ -18,10 +18,11 @@[m [mclass display{[m
     display();[m
     void update_display(String input, uint8_t x, uint8_t y, uint8_t size);[m
     void status_calibration();[m
[32m+[m[32m    void status_errorRange();[m
     void status_position(int position);[m
     void begin();[m
   private:[m
[31m-    Adafruit_SSD1306 display;[m
[32m+[m[32m    Adafruit_SSD1306 OLED;[m
 };[m
 [m
 #endif[m
\ No newline at end of file[m
[1mdiff --git a/sketch_jan10a/AKS/src/main.cpp b/sketch_jan10a/AKS/src/main.cpp[m
[1mindex 613fce3..d8fd547 100644[m
[1m--- a/sketch_jan10a/AKS/src/main.cpp[m
[1m+++ b/sketch_jan10a/AKS/src/main.cpp[m
[36m@@ -1,8 +1,9 @@[m
 [m
[31m-#include "stepper.h"[m
 #include "display.h"[m
[32m+[m[32m#include "stepper.h"[m[41m[m
 [m
[31m-Stepper NEMA17(2,3,4,5,6,7,20,21);[m
[32m+[m[32mStepper NEMA17(2,3,4,5,6,7,8,9);[m[41m[m
[32m+[m[32mdisplay SSD1306;[m[41m[m
 [m
 void setup()[m
 {[m
[36m@@ -11,10 +12,15 @@[m [mvoid setup()[m
 [m
   Serial.begin(9600);[m
   NEMA17.change_microstep_resolution(1);[m
[31m-  NEMA17.change_profile(12000,30000);[m
[32m+[m[32m  NEMA17.change_profile(5000,30000);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  SSD1306.begin();[m[41m[m
[32m+[m[41m [m
[32m+[m[32m  NEMA17.calibration(50);[m[41m[m
[32m+[m[32m  NEMA17.move_absolute(0);[m[41m[m
 [m
   //Different Stepper-Modes[m
[31m-  // NEMA17.calibration(50);[m
[32m+[m[32m  // SSD1306.status_calibration();[m[41m[m
   // delay(1000);[m
   // NEMA17.change_microstep_resolution(2);[m
   // NEMA17.move_relative(-800);[m
[1mdiff --git a/sketch_jan10a/AKS/src/stepper.cpp b/sketch_jan10a/AKS/src/stepper.cpp[m
[1mindex 64d36f3..23e48e9 100644[m
[1m--- a/sketch_jan10a/AKS/src/stepper.cpp[m
[1m+++ b/sketch_jan10a/AKS/src/stepper.cpp[m
[36m@@ -17,6 +17,8 @@[m [mStepper::Stepper(int pin_dir, int pin_step, int pin_nEnable, int pin_M0, int pin[m
     digitalWrite(step_pin,LOW);[m
     pinMode(direction_pin,OUTPUT);[m
     digitalWrite(direction_pin,LOW);[m
[32m+[m[32m    pinMode(nEnable_pin,OUTPUT);[m[41m[m
[32m+[m[32m    digitalWrite(nEnable_pin,HIGH);[m[41m[m
 [m
     pinMode(endstop1_pin, INPUT_PULLUP);[m
     pinMode(endstop2_pin, INPUT_PULLUP);[m
[36m@@ -71,7 +73,7 @@[m [mvoid Stepper::calibration(unsigned int endstop_offset)[m
 void Stepper::setup_move(double absolute_pos)[m
 {[m
     absolute_position = absolute_pos;[m
[31m-    [m
[32m+[m[41m[m
     //Test if target position is in calibrated range[m
     if(absolute_position < 0 || absolute_position > endstop_position){[m
       out_ofRange();[m
